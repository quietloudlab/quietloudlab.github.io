const CONFIG={MOUSE_RANGE:300,WEIGHT_MIN:60,WEIGHT_MAX:180,WEIGHT_BASELINE:60,DISTORTION_MIN:0,DISTORTION_MAX:80,DISTORTION_BASELINE:0,DECAY_RATE:.85};let state={mouseX:0,mouseY:0,clickEffect:0,keyboardEffect:0,lastKeyTime:0};const allLetters=document.querySelectorAll("#splash span"),letters=Array.from(allLetters).slice(0,-3),descriptions=document.querySelectorAll(".description"),modal=document.getElementById("contactModal"),floatingBtn=document.getElementById("floatingInfoBtn");function calculateMouseEffect(e,t,n,o,a){const s=e-(n.left+n.width/2),i=t-(n.top+n.height/2),c=Math.sqrt(s*s+i*i);if(c>CONFIG.MOUSE_RANGE)return{weight:0,distortion:0};const d=Math.max(0,1-c/CONFIG.MOUSE_RANGE),l=15*Math.sin(a+.5*o)*d;return{weight:CONFIG.WEIGHT_BASELINE+30*l,distortion:CONFIG.DISTORTION_BASELINE+25*l}}function calculateBaselineEffects(e,t){const n=25*Math.sin(15*t+.3*e)*state.clickEffect,o=30*Math.sin(20*t+.4*e)*state.keyboardEffect;return{weight:CONFIG.WEIGHT_BASELINE+n+o,distortion:CONFIG.DISTORTION_BASELINE+n+o}}function updateLetter(e,t,n){CSS.supports("font-variation-settings",'"wght" 100')?e.style.fontVariationSettings=`"wght" ${t.toFixed(1)}, "DIST" ${n.toFixed(1)}`:(e.style.fontWeight=Math.round(t),e.style.transform=`scaleX(${1+n/100})`)}function animate(e){const t=.001*e;state.clickEffect*=CONFIG.DECAY_RATE,state.keyboardEffect*=CONFIG.DECAY_RATE,letters.forEach((e,n)=>{const o=e.getBoundingClientRect(),a=calculateMouseEffect(state.mouseX,state.mouseY,o,n,t),s=calculateBaselineEffects(n,t);updateLetter(e,Math.max(CONFIG.WEIGHT_MIN,Math.min(CONFIG.WEIGHT_MAX,s.weight+a.weight)),Math.max(CONFIG.DISTORTION_MIN,Math.min(CONFIG.DISTORTION_MAX,s.distortion+a.distortion)))}),requestAnimationFrame(animate)}function handleMouseMove(e){state.mouseX=e.clientX,state.mouseY=e.clientY}function handleClick(){state.clickEffect=1}function handleKeyDown(){const e=Date.now(),t=e-state.lastKeyTime;state.keyboardEffect=t<1e3?Math.min(1,state.keyboardEffect+.3):.5,state.lastKeyTime=e}function handleScroll(){const e=.8*window.innerHeight;descriptions.forEach(t=>{if(t.classList.contains("revealed"))return;const n=t.getBoundingClientRect();n.top<e&&n.bottom>0&&t.classList.add("revealed")})}function toggleModal(){modal.classList.contains("active")?closeModal():openModal()}function openModal(){modal.classList.add("active"),floatingBtn.classList.add("modal-active"),document.body.style.overflow="hidden"}function closeModal(){modal.classList.remove("active"),floatingBtn.classList.remove("modal-active"),document.body.style.overflow=""}function createGlassGrid(){const e=document.getElementById("glassPaneGrid");if(!e)return;const t=e.getBoundingClientRect(),n=window.innerWidth<=768?100:150,o=Math.ceil(t.width/n),a=Math.ceil(t.height/n);e.innerHTML="",e.style.display="grid",e.style.gridTemplateColumns=`repeat(${o}, 1fr)`,e.style.gridTemplateRows=`repeat(${a}, 1fr)`,e.style.gap="0";for(let t=0;t<a*o;t++){const t=document.createElement("div");t.className="glass-pane",t.style.opacity=.7+.3*Math.random(),e.appendChild(t)}}function handleFormSubmit(e){e.preventDefault();const t=e.target,n=t.querySelector('button[type="submit"]'),o=n.innerHTML;n.innerHTML="Sending...",n.disabled=!0;const a=new FormData(t),s=Object.fromEntries(a);s._redirect=!1,fetch(t.action,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(e=>{if(!e.ok)throw new Error("Network response was not ok");showMessage(t,"Thank you! Your message has been sent successfully.","success"),t.reset()}).catch(()=>{showMessage(t,"Sorry, there was an error. Please try again or contact us directly.","error")}).finally(()=>{n.innerHTML=o,n.disabled=!1})}function showMessage(e,t,n){const o=document.createElement("div");o.className=`form-message ${n}`,o.innerHTML=`\n    <div style="\n      background: ${"success"===n?"rgba(76, 175, 80, 0.1)":"rgba(244, 67, 54, 0.1)"};\n      border: 1px solid ${"success"===n?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)"};\n      color: ${"success"===n?"#4CAF50":"#F44336"};\n      padding: 1rem;\n      border-radius: 8px;\n      margin: 1rem 0;\n    ">\n      ${t}\n    </div>\n  `,e.parentNode.insertBefore(o,e.nextSibling),setTimeout(()=>{o.remove()},5e3)}function initVideo(){const e=document.querySelector(".background-video");e&&(e.load(),e.addEventListener("loadeddata",()=>{e.play().catch(t=>{console.log("Video autoplay failed:",t),document.addEventListener("click",()=>{e.play().catch(console.log)},{once:!0})})}),e.addEventListener("error",e=>{console.log("Video error:",e)}),e.readyState>=2&&e.play().catch(console.log))}function init(){initVideo(),createGlassGrid(),document.addEventListener("mousemove",handleMouseMove),document.addEventListener("click",handleClick),document.addEventListener("keydown",handleKeyDown),document.addEventListener("scroll",handleScroll),floatingBtn&&floatingBtn.addEventListener("click",toggleModal),modal&&(modal.addEventListener("click",e=>{e.target===modal&&closeModal()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&modal.classList.contains("active")&&closeModal()}));const e=document.querySelector(".signup-form"),t=document.querySelector(".contact-form-inner");e&&e.addEventListener("submit",handleFormSubmit),t&&t.addEventListener("submit",handleFormSubmit),window.addEventListener("resize",()=>{setTimeout(createGlassGrid,150)}),requestAnimationFrame(animate),setTimeout(handleScroll,100)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",init):init();