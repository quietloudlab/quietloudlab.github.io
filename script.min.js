const CONFIG={MOUSE_RANGE:250,WEIGHT_MIN:60,WEIGHT_MAX:200,DECAY_RATE:.99,HOVER_INTENSITY:3,GLASS_REACTIVITY:1,RAINBOW_INTENSITY:2};let mouseX=0,mouseY=0,clickEffect=0,keyboardEffect=0,isHovering=!1,hoverIntensity=0,animationId=null,lastScrollY=0,scrollDirection="down";const letters=Array.from(document.querySelectorAll("#splash span")).slice(0,-3),descriptions=document.querySelectorAll(".description"),logo=document.querySelector(".logo"),modal=document.getElementById("contactModal"),floatingBtn=document.getElementById("floatingInfoBtn"),video=document.querySelector(".background-video"),glassPanes=[];function calculateEffect(e,t,n){const o=e.getBoundingClientRect(),i=o.left+o.width/2,a=o.top+o.height/2,s=Math.sqrt((mouseX-i)**2+(mouseY-a)**2),d=Math.max(0,1-s/CONFIG.MOUSE_RANGE),l=35*d+25*(isHovering?hoverIntensity*CONFIG.HOVER_INTENSITY:0),r=25*clickEffect,c=20*Math.sin(15*n+.5*t)*keyboardEffect;return{weight:Math.max(CONFIG.WEIGHT_MIN,Math.min(CONFIG.WEIGHT_MAX,60+l+r+c)),distortion:Math.max(0,Math.min(90,.8*l+.6*r+.8*c)),intensity:d}}function updateLetter(e,t,n,o){if(CSS.supports("font-variation-settings",'"wght" 100')?e.style.fontVariationSettings=`"wght" ${t.toFixed(1)}, "DIST" ${n.toFixed(1)}`:(e.style.fontWeight=Math.round(t),e.style.transform=`scaleX(${1+n/100})`),n>5){const t=Math.min(1,(n-5)/20)*CONFIG.RAINBOW_INTENSITY,o=2*Math.sin(.1*n)*t,i=2*Math.cos(.1*n)*t;e.style.textShadow=`\n      ${o}px 0 4px rgba(255, 100, 100, ${.3*t}),\n      ${i}px 0 4px rgba(100, 100, 255, ${.3*t}),\n      0 0 ${4+8*t}px rgba(255, 255, 255, ${.2+.3*t})\n    `}else if(o>.02){const t=Math.min(1,2*o);e.style.textShadow=`0 0 ${4+8*t}px rgba(255, 255, 255, ${.2+.3*t})`}else e.style.textShadow=""}function updateGlassPanes(){glassPanes.forEach(e=>{const t=e.getBoundingClientRect(),n=t.left+t.width/2,o=t.top+t.height/2,i=Math.sqrt((mouseX-n)**2+(mouseY-o)**2),a=Math.max(0,1-i/300)*CONFIG.GLASS_REACTIVITY;a>.05?(e.classList.add("refracting"),e.style.opacity=Math.min(1,.8+.3*a)):(e.classList.remove("refracting"),e.style.opacity="")})}function animate(e){const t=.001*e;clickEffect*=CONFIG.DECAY_RATE,keyboardEffect*=CONFIG.DECAY_RATE,isHovering?hoverIntensity=Math.min(1,hoverIntensity+.4):hoverIntensity*=.6,letters.forEach((e,n)=>{const o=calculateEffect(e,n,t);updateLetter(e,o.weight,o.distortion,o.intensity)}),updateGlassPanes(),animationId=requestAnimationFrame(animate)}function handleScroll(){const e=window.scrollY;scrollDirection=e>lastScrollY?"down":"up",lastScrollY=e;const t=.7*window.innerHeight,n=.3*window.innerHeight;descriptions.forEach((e,o)=>{if(e.classList.contains("final-line"))return;const i=e.getBoundingClientRect(),a=i.top<t&&i.bottom>n,s=e.classList.contains("revealed");if(a&&!s)setTimeout(()=>{e.classList.add("revealed"),e.classList.remove("exiting")},60*o);else if(!a&&s){setTimeout(()=>{e.classList.remove("revealed"),e.classList.add("exiting")},"up"===scrollDirection?0:30*o)}});const o=document.querySelector(".final-line");if(logo&&o){const e=logo.getBoundingClientRect(),t=o.getBoundingClientRect(),n=.8*window.innerHeight,i=e.top<n&&e.bottom>0,a=t.top<n&&t.bottom>0,s=logo.classList.contains("revealed"),d=o.classList.contains("revealed");i&&a&&!s&&!d?setTimeout(()=>{o.classList.add("revealed"),o.classList.remove("exiting"),logo.classList.add("revealed")},200):i&&a||!s&&!d||(o.classList.remove("revealed"),o.classList.add("exiting"),logo.classList.remove("revealed"))}}function handleMouseMove(e){mouseX=e.clientX,mouseY=e.clientY}function handleMouseEnter(){isHovering=!0,video&&video.classList.add("hover-active")}function handleMouseLeave(){isHovering=!1,video&&video.classList.remove("hover-active")}function handleClick(){clickEffect=1}function handleKeyDown(){const e=Date.now(),t=e-(handleKeyDown.lastTime||0);keyboardEffect=t<500?Math.min(1,keyboardEffect+.3):t<2e3?Math.min(1,keyboardEffect+.15):.6,handleKeyDown.lastTime=e}function toggleModal(){modal.classList.contains("active")?(modal.classList.remove("active"),floatingBtn.classList.remove("modal-active"),document.body.style.overflow=""):(modal.classList.add("active"),floatingBtn.classList.add("modal-active"),document.body.style.overflow="hidden")}function closeModal(){modal.classList.remove("active"),floatingBtn.classList.remove("modal-active"),document.body.style.overflow=""}function createEffectControls(){const e=document.getElementById("effectControls");e&&e.remove();const t=document.createElement("div");t.id="effectControls",t.style.cssText="\n    position: fixed; top: 20px; left: 20px; z-index: 10000;\n    background: rgba(0,0,0,0.8); backdrop-filter: blur(20px);\n    border: 1px solid rgba(255,255,255,0.2); border-radius: 12px;\n    padding: 20px; color: white; font-family: Arial, sans-serif; font-size: 12px;\n    min-width: 280px; max-height: 80vh; overflow-y: auto;\n  ";const n=[{key:"MOUSE_RANGE",label:"Mouse Range",min:100,max:500,step:10},{key:"WEIGHT_MAX",label:"Max Weight",min:60,max:200,step:5},{key:"DECAY_RATE",label:"Decay Rate",min:.1,max:.99,step:.01},{key:"HOVER_INTENSITY",label:"Hover Intensity",min:.5,max:3,step:.1},{key:"GLASS_REACTIVITY",label:"Glass Reactivity",min:0,max:1,step:.05},{key:"RAINBOW_INTENSITY",label:"Rainbow Intensity",min:0,max:2,step:.1}];t.innerHTML=`\n    <div style="margin-bottom: 15px; border-bottom: 1px solid rgba(255,255,255,0.2); padding-bottom: 10px;">\n      <h3 style="margin: 0 0 10px 0; font-size: 14px;">Effect Controls</h3>\n      <p style="margin: 0; opacity: 0.8; font-size: 11px;">Adjust sliders to find your perfect combination</p>\n    </div>\n    ${n.map(e=>`\n      <div style="margin-bottom: 15px;">\n        <label style="display: block; margin-bottom: 5px; font-weight: bold;">\n          ${e.label}: <span id="${e.key}Value">${CONFIG[e.key]}</span>\n        </label>\n        <input type="range" id="${e.key}Slider" min="${e.min}" max="${e.max}" step="${e.step}" \n               value="${CONFIG[e.key]}" style="width: 100%; height: 6px; border-radius: 3px; background: rgba(255,255,255,0.2); outline: none;">\n      </div>\n    `).join("")}\n    <div style="margin-top: 20px; display: flex; gap: 10px;">\n      <button id="resetBtn" style="background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.3); color: white; padding: 8px 12px; border-radius: 6px; cursor: pointer; font-size: 11px;">Reset</button>\n      <button id="copyBtn" style="background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.3); color: white; padding: 8px 12px; border-radius: 6px; cursor: pointer; font-size: 11px;">Copy Config</button>\n      <button id="closeBtn" style="background: rgba(255,100,100,0.2); border: 1px solid rgba(255,100,100,0.4); color: white; padding: 8px 12px; border-radius: 6px; cursor: pointer; font-size: 11px;">Close</button>\n    </div>\n  `,document.body.appendChild(t),n.forEach(e=>{const t=document.getElementById(`${e.key}Slider`),n=document.getElementById(`${e.key}Value`);t.addEventListener("input",t=>{CONFIG[e.key]=parseFloat(t.target.value),n.textContent=CONFIG[e.key].toFixed(e.step<.1?2:1)})}),document.getElementById("resetBtn").addEventListener("click",()=>{Object.assign(CONFIG,{MOUSE_RANGE:250,WEIGHT_MAX:200,DECAY_RATE:.99,HOVER_INTENSITY:3,GLASS_REACTIVITY:1,RAINBOW_INTENSITY:2}),n.forEach(e=>{document.getElementById(`${e.key}Slider`).value=CONFIG[e.key],document.getElementById(`${e.key}Value`).textContent=CONFIG[e.key].toFixed(e.step<.1?2:1)})}),document.getElementById("copyBtn").addEventListener("click",()=>{navigator.clipboard.writeText(JSON.stringify(CONFIG,null,2));const e=document.getElementById("copyBtn");e.textContent="Copied!",e.style.background="rgba(100,255,100,0.2)",setTimeout(()=>{e.textContent="Copy Config",e.style.background="rgba(255,255,255,0.1)"},2e3)}),document.getElementById("closeBtn").addEventListener("click",()=>t.remove())}function createGlassGrid(){const e=document.getElementById("glassPaneGrid");if(!e)return;const t=e.getBoundingClientRect(),n=window.innerWidth<=480?120:window.innerWidth<=768?100:150,o=Math.ceil(t.width/n),i=Math.ceil(t.height/n);e.innerHTML="",e.style.display="grid",e.style.gridTemplateColumns=`repeat(${o}, 1fr)`,e.style.gridTemplateRows=`repeat(${i}, 1fr)`,e.style.gap="0",glassPanes.length=0;for(let t=0;t<i*o;t++){const t=document.createElement("div");t.className="glass-pane",t.style.opacity=.7+.3*Math.random(),e.appendChild(t),glassPanes.push(t)}}function handleFormSubmit(e){e.preventDefault();const t=e.target,n=t.querySelector('button[type="submit"]'),o=n.innerHTML;n.innerHTML="Sending...",n.disabled=!0;const i=new FormData(t),a=Object.fromEntries(i);a._redirect=!1,fetch(t.action,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(e=>{if(!e.ok)throw new Error("Network response was not ok");showMessage(t,"Thank you! Your message has been sent successfully.","success"),t.reset()}).catch(()=>{showMessage(t,"Sorry, there was an error. Please try again or contact us directly.","error")}).finally(()=>{n.innerHTML=o,n.disabled=!1})}function showMessage(e,t,n){const o=document.createElement("div");o.innerHTML=`\n    <div style="\n      background: ${"success"===n?"rgba(76, 175, 80, 0.1)":"rgba(244, 67, 54, 0.1)"};\n      border: 1px solid ${"success"===n?"rgba(76, 175, 80, 0.3)":"rgba(244, 67, 54, 0.3)"};\n      color: ${"success"===n?"#4CAF50":"#F44336"};\n      padding: 1rem; border-radius: 8px; margin: 1rem 0;\n    ">${t}</div>\n  `,e.parentNode.insertBefore(o,e.nextSibling),setTimeout(()=>o.remove(),5e3)}function initVideo(){video&&(video.load(),video.addEventListener("loadeddata",()=>{video.play().catch(()=>{document.addEventListener("click",()=>video.play().catch(console.log),{once:!0})})}),video.readyState>=2&&video.play().catch(console.log))}function init(){initVideo(),createGlassGrid(),document.addEventListener("mousemove",handleMouseMove),document.addEventListener("click",handleClick),document.addEventListener("keydown",handleKeyDown),document.addEventListener("scroll",handleScroll,{passive:!0});const e=document.getElementById("splash");e&&(e.addEventListener("mouseenter",handleMouseEnter),e.addEventListener("mouseleave",handleMouseLeave)),floatingBtn&&floatingBtn.addEventListener("click",toggleModal),modal&&(modal.addEventListener("click",e=>{e.target===modal&&closeModal()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&modal.classList.contains("active")&&closeModal()}));const t=document.querySelector(".signup-form"),n=document.querySelector(".contact-form-inner");let o;t&&t.addEventListener("submit",handleFormSubmit),n&&n.addEventListener("submit",handleFormSubmit),window.addEventListener("resize",()=>{clearTimeout(o),o=setTimeout(()=>{createGlassGrid()},150)}),document.addEventListener("keydown",e=>{(e.ctrlKey||e.metaKey)&&"e"===e.key&&(e.preventDefault(),createEffectControls())}),animationId=requestAnimationFrame(animate),setTimeout(handleScroll,100)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",init):init();